"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[3856],{33856:function(a,e,t){t.r(e),t.d(e,{default:function(){return d}});t(68309);var l=function(){var a=this,e=a._self._c;return e("el-dialog",{attrs:{width:"680px",visible:a.visible,"close-on-click-modal":!1,"custom-class":"ele-dialog-form",title:a.isUpdate?"修改支付码":"添加支付码"},on:{"update:visible":a.updateVisible}},[e("el-form",{ref:"form",attrs:{model:a.form,rules:a.rules,"label-width":"120px"}},[e("el-row",[e("el-form-item",{attrs:{label:"名称:",prop:"name"}},[e("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"请输入名称"},model:{value:a.form.name,callback:function(e){a.$set(a.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"所有者:",prop:"account_owner_id"}},[e("user-select",{attrs:{"role-id":4},model:{value:a.form.account_owner_id,callback:function(e){a.$set(a.form,"account_owner_id",e)},expression:"form.account_owner_id"}})],1),e("el-form-item",{attrs:{label:"支付码类型:",prop:"account_type_id"}},[e("account-type-select",{model:{value:a.form.account_type_id,callback:function(e){a.$set(a.form,"account_type_id",e)},expression:"form.account_type_id"}})],1),e("el-form-item",{attrs:{label:"每日收款金额:",prop:"amount_day_limit"}},[e("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"为0则不限制"},model:{value:a.form.amount_day_limit,callback:function(e){a.$set(a.form,"amount_day_limit",e)},expression:"form.amount_day_limit"}})],1),e("el-form-item",{attrs:{label:"每日笔数限制:",prop:"times_day_limit"}},[e("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"为0则不显示"},model:{value:a.form.times_day_limit,callback:function(e){a.$set(a.form,"times_day_limit",e)},expression:"form.times_day_limit"}})],1),e("el-form-item",{attrs:{label:"单笔最小金额:",prop:"amount_min_limit"}},[e("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"为0则不显示"},model:{value:a.form.amount_min_limit,callback:function(e){a.$set(a.form,"amount_min_limit",e)},expression:"form.amount_min_limit"}})],1),e("el-form-item",{attrs:{label:"单笔最大金额:",prop:"amount_max_limit"}},[e("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"为0则不显示"},model:{value:a.form.amount_max_limit,callback:function(e){a.$set(a.form,"amount_max_limit",e)},expression:"form.amount_max_limit"}})],1),1==a.form.account_type_id?[e("el-form-item",{attrs:{label:"支付宝appid:",prop:"param1"}},[e("el-input",{attrs:{clearable:"",maxlength:120,placeholder:"请输入支付宝appid"},model:{value:a.form.param1,callback:function(e){a.$set(a.form,"param1",e)},expression:"form.param1"}})],1),e("el-form-item",{attrs:{label:"支付宝公钥:",prop:"param4"}},[e("el-input",{attrs:{placeholder:"请输入支付宝公钥",rows:4,type:"textarea"},model:{value:a.form.param4,callback:function(e){a.$set(a.form,"param4",e)},expression:"form.param4"}})],1),e("el-form-item",{attrs:{label:"支付宝私钥:",prop:"param5"}},[e("el-input",{attrs:{placeholder:"请输入支付宝私钥",rows:4,type:"textarea"},model:{value:a.form.param5,callback:function(e){a.$set(a.form,"param5",e)},expression:"form.param5"}})],1)]:a._e(),2==a.form.account_type_id?[e("el-form-item",{attrs:{label:"支付宝二维码:",prop:"param1"}},[e("el-row",[e("el-col",{attrs:{span:4}},[e("img",{attrs:{src:a.form.param1,width:"60px",height:"60px"}})]),e("el-col",{attrs:{span:10}},[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"upload",staticClass:"ele-block",attrs:{drag:"",accept:".jpg,.png","show-file-list":!0,"before-upload":a.doUpload1,"auto-upload":!0,multiple:!1}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[a._v("将文件拖到此处, 或 "),e("em",[a._v("点击上传")])]),e("div",{staticClass:"el-upload__tip ele-text-center",attrs:{slot:"tip"},slot:"tip"},[e("span",[a._v("只能上传png、jpg文件 ")])])])],1)],1)],1),e("el-form-item",{attrs:{label:"二维码链接:",prop:"param2"}},[e("el-input",{attrs:{placeholder:"请输入二维码链接"},model:{value:a.form.param2,callback:function(e){a.$set(a.form,"param2",e)},expression:"form.param2"}})],1)]:a._e(),3==a.form.account_type_id?[e("el-form-item",{attrs:{label:"开户账号名称:",prop:"param1"}},[e("el-input",{attrs:{clearable:"",maxlength:120,placeholder:"请输入开户账号名称"},model:{value:a.form.param1,callback:function(e){a.$set(a.form,"param1",e)},expression:"form.param1"}})],1),e("el-form-item",{attrs:{label:"开户行:",prop:"param2"}},[e("el-input",{attrs:{clearable:"",maxlength:120,placeholder:"请输入开户行"},model:{value:a.form.param2,callback:function(e){a.$set(a.form,"param2",e)},expression:"form.param2"}})],1),e("el-form-item",{attrs:{label:"卡号",prop:"param3"}},[e("el-input",{attrs:{clearable:"",maxlength:120,placeholder:"请输入卡号"},model:{value:a.form.param3,callback:function(e){a.$set(a.form,"param3",e)},expression:"form.param3"}})],1)]:a._e(),7==a.form.account_type_id?[e("el-form-item",{attrs:{label:"支付宝appid:",prop:"param1"}},[e("el-input",{attrs:{clearable:"",maxlength:120,placeholder:"请输入支付宝appid"},model:{value:a.form.param1,callback:function(e){a.$set(a.form,"param1",e)},expression:"form.param1"}})],1),e("el-form-item",{attrs:{label:"支付宝公钥:",prop:"param4"}},[e("el-input",{attrs:{placeholder:"请输入支付宝公钥",rows:4,type:"textarea"},model:{value:a.form.param4,callback:function(e){a.$set(a.form,"param4",e)},expression:"form.param4"}})],1),e("el-form-item",{attrs:{label:"支付宝私钥:",prop:"param5"}},[e("el-input",{attrs:{placeholder:"请输入支付宝私钥",rows:4,type:"textarea"},model:{value:a.form.param5,callback:function(e){a.$set(a.form,"param5",e)},expression:"form.param5"}})],1)]:a._e(),8==a.form.account_type_id?[e("el-form-item",{attrs:{label:"支付宝appid:",prop:"param4"}},[e("el-input",{attrs:{clearable:"",maxlength:120,placeholder:"请输入支付宝appid"},model:{value:a.form.param4,callback:function(e){a.$set(a.form,"param4",e)},expression:"form.param4"}})],1),e("el-form-item",{attrs:{label:"应用公钥证书:",prop:"param1"}},[e("el-row",[e("el-input",{attrs:{placeholder:"请输入文件链接"},model:{value:a.form.param1,callback:function(e){a.$set(a.form,"param1",e)},expression:"form.param1"}})],1),e("el-row",[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"upload",staticClass:"ele-block",attrs:{drag:"","show-file-list":!0,"before-upload":a.doUpload1,"auto-upload":!0,multiple:!1}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[a._v("将文件拖到此处, 或 "),e("em",[a._v("点击上传")])]),e("div",{staticClass:"el-upload__tip ele-text-center",attrs:{slot:"tip"},slot:"tip"},[e("span",[a._v("只能上传证书文件 ")])])])],1)],1),e("el-form-item",{attrs:{label:"支付宝公钥证书:",prop:"param2"}},[e("el-row",[e("el-input",{attrs:{placeholder:"请输入文件链接"},model:{value:a.form.param2,callback:function(e){a.$set(a.form,"param2",e)},expression:"form.param2"}})],1),e("el-row",[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"upload",staticClass:"ele-block",attrs:{drag:"","show-file-list":!0,"before-upload":a.doUpload2,"auto-upload":!0,multiple:!1}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[a._v("将文件拖到此处, 或 "),e("em",[a._v("点击上传")])]),e("div",{staticClass:"el-upload__tip ele-text-center",attrs:{slot:"tip"},slot:"tip"},[e("span",[a._v("只能上传证书文件 ")])])])],1)],1),e("el-form-item",{attrs:{label:"支付宝根证书:",prop:"param3"}},[e("el-row",[e("el-input",{attrs:{placeholder:"请输入文件链接"},model:{value:a.form.param3,callback:function(e){a.$set(a.form,"param3",e)},expression:"form.param3"}})],1),e("el-row",[e("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"upload",staticClass:"ele-block",attrs:{drag:"","show-file-list":!0,"before-upload":a.doUpload3,"auto-upload":!0,multiple:!1}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[a._v("将文件拖到此处, 或 "),e("em",[a._v("点击上传")])]),e("div",{staticClass:"el-upload__tip ele-text-center",attrs:{slot:"tip"},slot:"tip"},[e("span",[a._v("只能上传证书文件 ")])])])],1)],1),e("el-form-item",{attrs:{label:"支付宝私钥:",prop:"param5"}},[e("el-input",{attrs:{placeholder:"请输入支付宝私钥",rows:4,type:"textarea"},model:{value:a.form.param5,callback:function(e){a.$set(a.form,"param5",e)},expression:"form.param5"}})],1)]:a._e()],2)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return a.updateVisible(!1)}}},[a._v("取消 ")]),e("el-button",{attrs:{type:"primary",loading:a.loading},on:{click:a.save}},[a._v("保存 ")])],1)],1)},r=[],o=t(95082),i=(t(21703),t(29958)),m={id:null,account_owner_id:0,account_type_id:0,name:"",amount_day_limit:0,times_day_limit:0,amount_max_limit:0,amount_min_limit:0,param1:"",param2:"",param3:"",param4:"",param5:"",param6:""},p={name:"AccountEdit",props:{visible:Boolean,data:Object},data:function(){var a=this;return{form:(0,o.Z)({},m),rules:{name:[{required:!0,trigger:"blur",validator:function(e,t,l){var r;if(!t)return l(new Error("请输入名称"));i.Nj("name",t,null===(r=a.data)||void 0===r?void 0:r.name).then((function(){l(new Error("名称已经存在, 不能重复"))})).catch((function(){l()}))}}],account_owner_id:[{required:!0,message:"请选择所属码商",trigger:"blur"}],account_type_id:[{required:!0,message:"请选择支付码类型",trigger:"blur"}]},loading:!1,isUpdate:!1}},methods:{save:function(){var a=this;this.$refs["form"].validate((function(e){if(!e)return!1;a.loading=!0;var t=(0,o.Z)({},a.form),l=a.isUpdate?i.GX:i.uV;l(t).then((function(){a.loading=!1,a.$message.success("操作成功"),a.updateVisible(!1),a.$emit("done")})).catch((function(e){a.loading=!1,a.$message.error(e.message)}))}))},doUpload:function(a,e){var t=this;return this.loading=!0,i.ws(a).then((function(a){t.loading=!1,t.$message.success("上传成功"),t.form=(0,o.Z)({},t.form),t.form["param"+e]=a.url})).catch((function(a){t.loading=!1,t.$message.error(a.message)})),!1},doUpload1:function(a){return this.doUpload(a,"1")},doUpload2:function(a){return this.doUpload(a,"2")},doUpload3:function(a){return this.doUpload(a,"3")},updateVisible:function(a){this.$emit("update:visible",a)}},watch:{visible:function(a){a?this.data?(this.$util.assignObject(this.form,(0,o.Z)({},this.data)),this.isUpdate=!0):this.isUpdate=!1:(this.$refs["form"].clearValidate(),this.form=(0,o.Z)({},m))}}},s=p,n=t(1001),c=(0,n.Z)(s,l,r,!1,null,"3c0fbca0",null),d=c.exports}}]);