"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[6510],{46510:function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var a=function(){var e,t=this,i=t._self._c;return i("el-dialog",{attrs:{width:"680px",visible:t.visible,"close-on-click-modal":!1,"custom-class":"ele-dialog-form",title:t.isUpdate?"修改通道":"添加通道"},on:{"update:visible":t.updateVisible}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"82px"}},[i("el-row",[i("el-form-item",{attrs:{label:"商户:",prop:"username"}},[t._v(" "+t._s(null===(e=t.data)||void 0===e?void 0:e.username)+" ")]),i("el-form-item",{attrs:{label:"通道:",prop:"channel_id"}},[i("channel-select",{model:{value:t.form.channel_id,callback:function(e){t.$set(t.form,"channel_id",e)},expression:"form.channel_id"}})],1),i("el-form-item",{attrs:{label:"费率:",prop:"rate"}},[i("el-input",{attrs:{maxlength:20,placeholder:"请输入通道费率"},model:{value:t.form.rate,callback:function(e){t.$set(t.form,"rate",e)},expression:"form.rate"}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.updateVisible(!1)}}},[t._v("取消 ")]),i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("保存 ")])],1)],1)},l=[],n=i(95082),r=i(29958),s={id:null,user_id:null,channel_id:null,rate:0},o={name:"MerchantChannelEdit",props:{visible:Boolean,data:Object,channel:Object},data:function(){return{form:(0,n.Z)({},s),rules:{channel_id:[{required:!0,message:"请选择通道",trigger:"blur"}],rate:[{required:!0,message:"请输入费率",trigger:"blur"}]},loading:!1,isUpdate:!1}},methods:{save:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.loading=!0;var i=(0,n.Z)({},e.form),a=e.isUpdate?r.Ci:r.fR;a(i).then((function(){e.loading=!1,e.$message.success("操作成功"),e.updateVisible(!1),e.$emit("done")})).catch((function(t){e.loading=!1,e.$message.error(t.message)}))}))},updateVisible:function(e){this.$emit("update:visible",e)}},watch:{visible:function(e){var t;e?this.channel?(this.$util.assignObject(this.form,(0,n.Z)((0,n.Z)({},this.data),{},{channel_id:null===(t=this.channel)||void 0===t?void 0:t.id,rate:this.channel.pivot.rate})),this.isUpdate=!0):(this.$util.assignObject(this.form,(0,n.Z)({},this.data)),this.isUpdate=!1):(this.$refs["form"].clearValidate(),this.form=(0,n.Z)({},s))}}},d=o,c=i(1001),u=(0,c.Z)(d,a,l,!1,null,"3793d63c",null),m=u.exports}}]);