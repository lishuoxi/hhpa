"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[7931],{27931:function(e,o,t){t.r(o),t.d(o,{default:function(){return _}});var r=function(){var e=this,o=e._self._c;return o("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[o("el-form",{ref:"form",staticClass:"login-form ele-bg-white",attrs:{size:"large",model:e.form,rules:e.rules},nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.submit.apply(null,arguments)}}},[o("h4",[e._v(e._s(e.$t("login.title")))]),o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-user",placeholder:e.$t("login.username")},model:{value:e.form.username,callback:function(o){e.$set(e.form,"username",o)},expression:"form.username"}})],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{"show-password":"","prefix-icon":"el-icon-lock",placeholder:e.$t("login.password")},model:{value:e.form.password,callback:function(o){e.$set(e.form,"password",o)},expression:"form.password"}})],1),o("el-form-item",{attrs:{prop:"google_code"}},[o("el-input",{attrs:{"show-password":"","prefix-icon":"el-icon-lock",placeholder:"谷歌验证码,没绑定的不用填"},model:{value:e.form.google_code,callback:function(o){e.$set(e.form,"google_code",o)},expression:"form.google_code"}})],1),o("el-form-item",{attrs:{prop:"code"}},[o("div",{staticClass:"login-input-group"},[o("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-_vercode",placeholder:e.$t("login.code")},model:{value:e.form.code,callback:function(o){e.$set(e.form,"code",o)},expression:"form.code"}}),e.captcha?o("img",{staticClass:"login-captcha",attrs:{alt:"",src:e.captcha},on:{click:e.changeCaptcha}}):e._e()],1)]),o("div",{staticClass:"el-form-item"},[o("el-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary",loading:e.loading},on:{click:e.submit}},[e._v(" "+e._s(e.loading?e.$t("login.loading"):e.$t("login.login"))+" ")])],1)],1),o("div",{staticClass:"login-copyright"},[e._v(" copyright © 2024 all rights reserved. ")]),o("div",{staticStyle:{position:"absolute",right:"30px",top:"20px"}},[o("i18n-icon",{attrs:{"icon-style":{fontSize:"22px",color:"#fff",cursor:"pointer"}}})],1)],1)},a=[],n=function(){var e=this,o=e._self._c;return o("el-dropdown",{attrs:{placement:e.placement},on:{command:e.changeLanguage},scopedSlots:e._u([{key:"dropdown",fn:function(){return[o("el-dropdown-menu",[o("el-dropdown-item",{attrs:{command:"en"}},[o("span",{class:{"ele-text-primary":"en"===e.language}},[e._v(" English ")])]),o("el-dropdown-item",{attrs:{command:"zh_CN"}},[o("span",{class:{"ele-text-primary":"zh_CN"===e.language}},[e._v(" 简体中文 ")])]),o("el-dropdown-item",{attrs:{command:"zh_TW"}},[o("span",{class:{"ele-text-primary":"zh_TW"===e.language}},[e._v(" 繁體中文 ")])])],1)]},proxy:!0}])},[o("i",{staticClass:"el-icon-_language",style:e.iconStyle})])},s=[],l=t(18816),i={props:{placement:{type:String,default:"bottom"},iconStyle:Object},computed:{language(){return this.$i18n.locale}},methods:{changeLanguage(e){this.$i18n.locale=e,localStorage.setItem(l.qA,e)}}},c=i,m=t(1001),p=(0,m.Z)(c,n,s,!1,null,null,null),g=p.exports,u=t(73566),d=t(7877);function h(){var e=(new Date).getTime();window.performance&&"function"===typeof window.performance.now&&(e+=performance.now());var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(o){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==o?t:3&t|8).toString(16)}));return o}var f={name:"Login",components:{I18nIcon:g},data(){return{direction:0,loading:!1,form:{username:"",password:"",google_code:"",remember:!0,code:"",key:h()},text:"",d:(new Date).getTime()}},computed:{captcha(){return"http://api.henghaochi.com/api/captcha/"+this.form.key+"?k="+this.d},rules(){return{username:[{required:!0,message:this.$t("login.username"),type:"string",trigger:"blur"}],password:[{required:!0,message:this.$t("login.password"),type:"string",trigger:"blur"}],google_code:[{}]}}},created(){(0,u.LP)()?this.goHome():this.changeCaptcha()},methods:{submit(){this.$refs.form.validate((e=>{if(!e)return!1;this.loading=!0,(0,d.XR)(this.form).then((e=>{(0,u.o4)(e.userinfo.token,this.form.remember),this.loading=!1,this.$message.success("登陆成功"),this.goHome()})).catch((e=>{console.log("错误"),console.log(e),this.loading=!1,this.changeCaptcha(),this.$message.error(e.message)}))}))},goHome(){this.$router.push(this.$route?.query?.from??"/").catch((e=>{console.log("登录后跳转页面错误"),console.log(e)}))},changeCaptcha(){this.d=(new Date).getTime()}}},x=f,w=(0,m.Z)(x,r,a,!1,null,"406399c4",null),_=w.exports}}]);