"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[6311,8069],{68069:function(e,s,t){t.r(s),t.d(s,{default:function(){return m}});var l=function(){var e=this,s=e._self._c;return s("ele-modal",{attrs:{width:"420px",title:"绑定谷歌",visible:e.visible,"append-to-body":!0,"close-on-click-modal":!0},on:{"update:visible":e.updateVisible,closed:e.onClose},scopedSlots:e._u([{key:"footer",fn:function(){return[s("el-button",{on:{click:function(s){return e.updateVisible(!1)}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("绑定")])]},proxy:!0}])},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"82px"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.save.apply(null,arguments)}}},[s("el-form-item",{attrs:{label:"绑定谷歌"}},[s("ele-qr-code-svg",{attrs:{value:e.form.google_code_url,size:120}})],1),s("el-form-item",{attrs:{label:"谷歌码:",prop:"google_code"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.google_code,callback:function(s){e.$set(e.form,"google_code",s)},expression:"form.google_code"}})],1),s("el-form-item",{attrs:{label:"验证码:",prop:"verify_code"}},[s("el-input",{attrs:{"show-password":"",placeholder:"请输入验证码"},model:{value:e.form.verify_code,callback:function(s){e.$set(e.form,"verify_code",s)},expression:"form.verify_code"}})],1)],1)],1)},i=[],a=t(7877),o=t(16158),r=t(45623),n={props:{visible:Boolean},components:{EleQrCodeSvg:o.Z},data(){return{loading:!1,form:{google_code:"",google_code_url:"",verify_code:""},rules:{verify_code:[{required:!0,message:"请输入谷歌验证码",trigger:"blur"}]}}},created(){},watch:{visible(e,s){console.log(s),e&&(this.loading=!0,(0,a.h8)(this.form).then((e=>{this.loading=!1,Object.assign(this.form,e,{})})).catch((e=>{this.loading=!1,this.$message.error(e.message)})))}},methods:{updateVisible(e){this.$emit("update:visible",e)},save(){this.$refs.form.validate((e=>{if(!e)return!1;this.loading=!0,(0,a.q4)(this.form).then((()=>{this.loading=!1,this.$message.success("绑定成功"),(0,r.kS)()})).catch((e=>{this.loading=!1,this.$message.error(e.message)}))}))},onClose(){this.form={google_code:"",google_code_url:"",verify_code:""},this.$refs.form.resetFields(),this.loading=!1}}},c=n,d=t(1001),u=(0,d.Z)(c,l,i,!1,null,null,null),m=u.exports},96311:function(e,s,t){t.r(s),t.d(s,{default:function(){return u}});var l=function(){var e=this,s=e._self._c;return s("div",{staticClass:"ele-body"},[s("el-row",{attrs:{gutter:15}},[s("el-col",e._b({},"el-col",e.styleResponsive?{md:6,sm:8}:{span:6},!1),[s("el-card",{attrs:{shadow:"never","body-style":"padding: 25px;"}},[s("div",{staticClass:"user-info-card"},[s("div",{staticClass:"user-info-avatar-group"},[s("img",{staticClass:"user-info-avatar",attrs:{src:"/assets/avatar.jpg",alt:""}}),s("i",{staticClass:"el-icon-upload2"})]),s("h2",{staticClass:"user-info-name"},[e._v(e._s(e.loginUser.username))]),s("div",{staticStyle:{margin:"30px 0 20px 0"}},[s("el-divider",{staticClass:"ele-divider-dashed ele-divider-base"})],1),s("div",{staticClass:"user-info-list"},[s("div",{staticClass:"user-info-item"},[s("i",{staticClass:"el-icon-office-building"}),s("span",[e._v("余额: "+e._s(e.loginUser.balance))])]),s("div",{staticClass:"user-info-item"},[s("i",{staticClass:"el-icon-office-building"}),s("span",[e._v("锁定余额: "+e._s(e.loginUser.balance_lock))])])]),s("div",{staticClass:"user-info-list"},[s("div",{staticClass:"user-info-item"},[s("i",{staticClass:"el-icon-office-building"}),s("span",[e._v("代付余额: "+e._s(e.loginUser.daifu_balance))])]),s("div",{staticClass:"user-info-item"},[s("i",{staticClass:"el-icon-office-building"}),s("span",[e._v("锁定代付余额: "+e._s(e.loginUser.daifu_balance_lock))])])]),s("div",{staticStyle:{margin:"30px 0 20px 0"}},[s("el-divider",{staticClass:"ele-divider-dashed ele-divider-base"})],1),s("h6",{staticClass:"ele-text",staticStyle:{"margin-bottom":"8px"}},[e._v("已对接通道")]),s("div",{staticClass:"user-info-tags"},e._l(e.loginUser.channels,(function(t){return s("el-tag",{key:t.id,attrs:{size:"mini",type:"info"}},[e._v(" "+e._s(t.channel.name)+"-"+e._s(t.rate))])})),1)])])],1),s("el-col",e._b({},"el-col",e.styleResponsive?{md:18,sm:16}:{span:18},!1),[s("el-card",{attrs:{shadow:"never","body-style":"padding: 0;"}},[s("el-tabs",{staticClass:"user-info-tabs",model:{value:e.active,callback:function(s){e.active=s},expression:"active"}},[s("el-tab-pane",{attrs:{label:"基本信息",name:"info"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"450px",padding:"34px 20px 0 20px"},attrs:{model:e.form,rules:e.rules,"label-width":"120px"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.save.apply(null,arguments)},submit:function(e){e.preventDefault()}}},[s("el-form-item",{attrs:{label:"商户号:",prop:"merchant_id"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.merchant_id,callback:function(s){e.$set(e.form,"merchant_id",s)},expression:"form.merchant_id"}})],1),s("el-form-item",{attrs:{label:"Appkey:",prop:"merchant_key"}},[s("el-input",{attrs:{"show-password":e.showkey,disabled:""},model:{value:e.form.merchant_key,callback:function(s){e.$set(e.form,"merchant_key",s)},expression:"form.merchant_key"}},[s("template",{slot:"append"},[e.showkey?s("el-button",{attrs:{size:"small",type:"success"},on:{click:function(s){e.showkey=!1}}},[e._v("显示")]):e._e(),e.showkey?e._e():s("el-button",{attrs:{size:"small",type:"success"},on:{click:function(s){e.showkey=!0}}},[e._v("隐藏")])],1)],2)],1),s("el-form-item",{attrs:{label:"登陆账号:",prop:"username"}},[s("el-input",{attrs:{disabled:"",placeholder:"请输入登陆账号",clearable:""},model:{value:e.form.username,callback:function(s){e.$set(e.form,"username",s)},expression:"form.username"}})],1),s("el-form-item",{attrs:{label:"昵称:",prop:"realname"}},[s("el-input",{attrs:{placeholder:"请输入昵称",clearable:""},model:{value:e.form.realname,callback:function(s){e.$set(e.form,"realname",s)},expression:"form.realname"}})],1),s("el-form-item",{attrs:{label:"后台IP白名单:"}},[s("el-input",{attrs:{placeholder:"请输入后台登陆IP白名单,多个IP地址用逗号分割,为空则不限制",rows:4,type:"textarea"},model:{value:e.form.admin_secure_ips,callback:function(s){e.$set(e.form,"admin_secure_ips",s)},expression:"form.admin_secure_ips"}})],1),s("el-form-item",{attrs:{label:"订单IP白名单:"}},[s("el-input",{attrs:{placeholder:"请输入api发起订单IP,多个IP地址用逗号分割,为空则不限制",rows:4,type:"textarea"},model:{value:e.form.secure_ips,callback:function(s){e.$set(e.form,"secure_ips",s)},expression:"form.secure_ips"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v(" 保存更改 ")])],1)],1)],1),s("el-tab-pane",{attrs:{label:"账号安全",name:"account"}},[s("div",{staticClass:"user-account-list"},[s("div",{staticClass:"user-account-item ele-cell"},[s("div",{staticClass:"ele-cell-content"},[s("div",[e._v("支付密码")]),e.loginUser.secure_password_seted?s("div",{staticClass:"ele-text-secondary"},[e._v(" 已设置 ")]):e._e(),e.loginUser.secure_password_seted?e._e():s("div",{staticClass:"ele-text-secondary"},[e._v(" 未设置 ")])]),s("el-link",{attrs:{type:"primary",underline:!1}},[e._v("去修改")])],1),s("el-divider"),s("div",{staticClass:"user-account-item ele-cell"},[s("div",{staticClass:"ele-cell-content"},[s("div",[e._v("谷歌验证码")]),e.loginUser.google_seted?s("div",{staticClass:"ele-text-secondary"},[e._v(" 已绑定 ")]):e._e(),e.loginUser.google_seted?e._e():s("div",{staticClass:"ele-text-secondary"},[e._v(" 未绑定 ")])]),e.loginUser.google_seted?s("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(s){e.googleAuthVisible=!0}}},[e._v(" 修改绑定")]):e._e(),e.loginUser.google_seted?e._e():s("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(s){e.googleAuthVisible=!0}}},[e._v(" 去绑定")])],1),s("el-divider")],1)])],1)],1)],1)],1),s("google-auth-modal",{attrs:{visible:e.googleAuthVisible},on:{"update:visible":function(s){e.googleAuthVisible=s}}})],1)},i=[],a=t(68069),o=t(7877),r={name:"UserProfile",components:{GoogleAuthModal:a["default"]},data(){return{active:"info",showkey:!0,form:{username:"",realname:"1",admin_secure_ips:""},rules:{username:[{required:!0,message:"请输入昵称",trigger:"blur"}],realname:[{required:!0,message:"请输入真实名称",trigger:"blur"}]},loading:!1,visible:!1,googleAuthVisible:!1}},computed:{loginUser(){return this.$store.state.user.info},styleResponsive(){return this.$store.state.theme.styleResponsive}},created(){Object.assign(this.form,this.loginUser,{}),console.log("this.form"),console.log(this.form)},methods:{save(){this.$refs.form.validate((e=>{if(!e)return!1;this.loading=!0,o.gS(this.form).then((()=>{this.loading=!1,this.$message.success("操作成功"),this.updateLoginUser(this.form)})).catch((e=>{this.loading=!1,this.$message.error(e.message)}))}))},updateLoginUser(e){this.$store.dispatch("user/setInfo",{...this.loginUser,...e})}}},n=r,c=t(1001),d=(0,c.Z)(n,l,i,!1,null,"9d74cfb0",null),u=d.exports}}]);