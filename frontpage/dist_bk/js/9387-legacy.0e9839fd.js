"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[9387],{59387:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"720px",visible:e.visible,"close-on-click-modal":!1,"custom-class":"ele-dialog-form",title:e.isUpdate?"修改菜单":"添加菜单"},on:{"update:visible":e.updateVisible}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"92px"}},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{sm:12}},[t("el-form-item",{attrs:{label:"上级菜单:"}},[t("ele-tree-select",{attrs:{clearable:"",data:e.menuList,"label-key":"title","value-key":"menuId","default-expand-all":"",placeholder:"请选择上级菜单"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),t("el-form-item",{attrs:{label:"菜单名称:",prop:"title"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入菜单名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),t("el-col",{attrs:{sm:12}},[t("el-form-item",{attrs:{label:"菜单类型:"}},[t("el-radio-group",{on:{change:e.onMenuTypeChange},model:{value:e.form.menuType,callback:function(t){e.$set(e.form,"menuType",t)},expression:"form.menuType"}},[t("el-radio",{attrs:{label:0}},[e._v("菜单")]),t("el-radio",{attrs:{label:1}},[e._v("按钮")])],1)],1),t("el-form-item",{attrs:{label:"打开方式:"}},[t("el-radio-group",{attrs:{disabled:1===e.form.menuType},on:{change:e.onOpenTypeChange},model:{value:e.form.openType,callback:function(t){e.$set(e.form,"openType",t)},expression:"form.openType"}},[t("el-radio",{attrs:{label:0}},[e._v("组件")]),t("el-radio",{attrs:{label:1}},[e._v("内链")]),t("el-radio",{attrs:{label:2}},[e._v("外链")])],1)],1)],1)],1),t("div",{staticStyle:{margin:"6px 0 28px 0"}},[t("el-divider")],1),t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{sm:12}},[t("el-form-item",{attrs:{label:"菜单图标:"}},[t("ele-icon-picker",{attrs:{placeholder:"请选择菜单图标",disabled:1===e.form.menuType},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),t("el-form-item",{attrs:{name:"path"}},[t("template",{slot:"label"},[2===e.form.openType?t("el-tooltip",{attrs:{placement:"top",content:"需要以`http://`、`https://`、`//`开头"}},[t("i",{staticClass:"el-icon-_question"})]):e._e(),t("span",[e._v(" "+e._s(2===e.form.openType?" 外链地址:":" 路由地址:")+" ")])],1),t("el-input",{attrs:{clearable:"",disabled:1===e.form.menuType,placeholder:e.pathPlaceholder},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],2),t("el-form-item",{attrs:{name:"component"}},[t("template",{slot:"label"},[1===e.form.openType?t("el-tooltip",{attrs:{placement:"top",content:"需要以`http://`、`https://`、`//`开头"}},[t("i",{staticClass:"el-icon-_question"})]):e._e(),t("span",[e._v(" "+e._s(1===e.form.openType?" 内链地址:":" 组件路径:")+" ")])],1),t("el-input",{attrs:{clearable:"",disabled:1===e.form.menuType||2===e.form.openType,placeholder:e.componentPlaceholder},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],2)],1),t("el-col",{attrs:{sm:12}},[t("el-form-item",{attrs:{label:"权限标识:"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入权限标识",disabled:0===e.form.menuType},model:{value:e.form.authority,callback:function(t){e.$set(e.form,"authority",t)},expression:"form.authority"}})],1),t("el-form-item",{attrs:{label:"排序号:",prop:"sortNumber"}},[t("el-input-number",{staticClass:"ele-fluid ele-text-left",attrs:{min:0,placeholder:"请输入排序号","controls-position":"right"},model:{value:e.form.sortNumber,callback:function(t){e.$set(e.form,"sortNumber",t)},expression:"form.sortNumber"}})],1),t("el-form-item",{attrs:{label:"是否可见:"}},[t("el-switch",{attrs:{"active-value":0,"inactive-value":1,disabled:1===e.form.menuType},model:{value:e.form.hide,callback:function(t){e.$set(e.form,"hide",t)},expression:"form.hide"}}),t("el-tooltip",{attrs:{placement:"top",content:"选择不可见只注册路由不显示在侧边栏，比如添加页面应该选择不可见"}},[t("i",{staticClass:"el-icon-_question",staticStyle:{"vertical-align":"middle","margin-left":"8px"}})])],1)],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.updateVisible(!1)}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v(" 保存 ")])],1)],1)},a=[],r=l(95082),i=(l(9653),l(23157),l(42680)),n=l(29958),s={menuId:null,parentId:"",title:"",menuType:0,openType:0,icon:"",path:"",component:"",authority:"",sortNumber:null,hide:0},m={name:"MenuEdit",components:{EleIconPicker:i.Z},props:{visible:Boolean,data:Object,parentId:Number,menuList:Array},data:function(){return{form:(0,r.Z)({},s),rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],sortNumber:[{required:!0,message:"请输入排序号",trigger:"blur"}]},loading:!1,isUpdate:!1}},computed:{pathPlaceholder:function(){return 2===this.form.openType?"请输入外链地址":"请输入路由地址"},componentPlaceholder:function(){return 1===this.form.openType?"请输入内链地址":"请输入组件路径"}},methods:{save:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.loading=!0;var l=(0,r.Z)((0,r.Z)({},e.form),{},{parentId:e.form.parentId||0}),o=e.isUpdate?n.Q9:n.yx;o(l).then((function(t){e.loading=!1,e.$message.success(t),e.updateVisible(!1),e.$emit("done")})).catch((function(t){e.loading=!1,e.$message.error(t.message)}))}))},updateVisible:function(e){this.$emit("update:visible",e)},onMenuTypeChange:function(){0===this.form.menuType?this.form.authority=null:(this.form.openType=0,this.form.icon=null,this.form.path=null,this.form.component=null,this.form.hide=0)},onOpenTypeChange:function(){2===this.form.openType&&(this.form.component=null)},isUrl:function(e){return!(!e||!(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")))}},watch:{visible:function(e){if(e)if(this.data){var t,l=this.isUrl(this.data.component)?1:0;this.$util.assignObject(this.form,(0,r.Z)((0,r.Z)({},this.data),{},{openType:this.isUrl(this.data.path)?2:l,parentId:0===this.data.parentId?"":null!==(t=this.data.parentId)&&void 0!==t?t:""})),this.isUpdate=!0}else{var o;this.form.parentId=null!==(o=this.parentId)&&void 0!==o?o:"",this.isUpdate=!1}else this.$refs["form"].clearValidate(),this.form=(0,r.Z)({},s)}}},p=m,c=l(1001),u=(0,c.Z)(p,o,a,!1,null,"7d788273",null),f=u.exports}}]);