"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[371],{80371:function(e,a,t){t.r(a),t.d(a,{default:function(){return c}});var r=function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{width:"680px",visible:e.visible,"close-on-click-modal":!1,"custom-class":"ele-dialog-form",title:e.isUpdate?"修改用户":"添加用户"},on:{"update:visible":e.updateVisible}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"82px"}},[a("el-row",[a("el-form-item",{attrs:{label:"用户账号:",prop:"username"}},[a("el-input",{attrs:{clearable:"",maxlength:20,disabled:e.isUpdate,placeholder:"请输入用户账号"},model:{value:e.form.username,callback:function(a){e.$set(e.form,"username",a)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"真实姓名:",prop:"realname"}},[a("el-input",{attrs:{clearable:"",maxlength:20,placeholder:"请输入真实姓名"},model:{value:e.form.realname,callback:function(a){e.$set(e.form,"realname",a)},expression:"form.realname"}})],1),e.isUpdate?e._e():a("el-form-item",{attrs:{label:"登录密码:",prop:"password"}},[a("el-input",{attrs:{"show-password":"",maxlength:20,placeholder:"请输入登录密码"},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){return e.updateVisible(!1)}}},[e._v("取消 ")]),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保存 ")])],1)],1)},s=[],l=t(95082),i=(t(21703),t(29958)),o={id:null,username:"",realname:"",password:"",role_id:1},n={name:"UserEdit",props:{visible:Boolean,data:Object},data:function(){var e=this;return{form:(0,l.Z)((0,l.Z)({},o),{},{role_id:this.role_id}),rules:{username:[{required:!0,trigger:"blur",validator:function(a,t,r){var s;if(!t)return r(new Error("请输入用户账号"));i.s5("username",t,null===(s=e.data)||void 0===s?void 0:s.username).then((function(){r(new Error("账号已经存在"))})).catch((function(){r()}))}}],realname:[{required:!0,message:"请输入真实姓名",trigger:"blur"}]},loading:!1,isUpdate:!1}},methods:{save:function(){var e=this;this.$refs["form"].validate((function(a){if(!a)return!1;e.loading=!0;var t=(0,l.Z)({},e.form),r=e.isUpdate?i.iV:i.df;r(t).then((function(){e.loading=!1,e.$message.success("操作成功"),e.updateVisible(!1),e.$emit("done")})).catch((function(a){e.loading=!1,e.$message.error(a.message)}))}))},updateVisible:function(e){this.$emit("update:visible",e)}},watch:{visible:function(e){e?this.data?(this.$util.assignObject(this.form,(0,l.Z)((0,l.Z)({},this.data),{},{password:""})),this.isUpdate=!0):this.isUpdate=!1:(this.$refs["form"].clearValidate(),this.form=(0,l.Z)({},o))}}},d=n,u=t(1001),m=(0,u.Z)(d,r,s,!1,null,"3ad78446",null),c=m.exports}}]);